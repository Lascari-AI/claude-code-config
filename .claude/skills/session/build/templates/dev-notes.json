{
  "$schema": "DevNotes schema for session build phase",
  "$description": "Captures implementation learnings, deviations, discoveries, and decisions during build execution",

  "session_id": "{{SESSION_ID}}",
  "created_at": "{{CREATED_AT}}",
  "updated_at": "{{UPDATED_AT}}",

  "notes": [
    {
      "_example": true,
      "_description": "Example note - remove when creating actual file",
      "id": "dn-001",
      "timestamp": "2025-12-28T12:00:00Z",
      "scope": {
        "type": "task",
        "ref": "1.2.3"
      },
      "category": "deviation",
      "content": "Used async/await instead of callbacks as originally planned because the existing codebase uses promises throughout."
    }
  ],

  "_schema_reference": {
    "note_fields": {
      "id": {
        "type": "string",
        "format": "dn-XXX",
        "description": "Unique identifier, auto-incrementing"
      },
      "timestamp": {
        "type": "string",
        "format": "ISO 8601",
        "description": "When the note was created"
      },
      "scope": {
        "type": {
          "enum": ["task", "checkpoint", "session"],
          "description": "What level this note applies to"
        },
        "ref": {
          "type": "string|null",
          "description": "ID of the task/checkpoint, or null for session-wide"
        }
      },
      "category": {
        "enum": ["deviation", "discovery", "decision", "blocker", "resolution"],
        "descriptions": {
          "deviation": "Did something different than planned",
          "discovery": "Found something that affects current or future work",
          "decision": "Made a choice during implementation",
          "blocker": "Encountered something that prevented progress",
          "resolution": "How a blocker was resolved"
        }
      },
      "content": {
        "type": "string",
        "description": "Human-readable description of the note"
      }
    }
  }
}
